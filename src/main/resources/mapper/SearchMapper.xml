<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.qf.dao.SearchMapper">
<resultMap id="bandDto" type="com.qf.dto.BandDto">
    <id column="store_id" property="store_id" jdbcType="INTEGER"/>
    <result column="logo_img_url" property="logo_img_url" jdbcType="LONGNVARCHAR"/>
</resultMap>
<resultMap id="store" type="com.qf.pojo.Store">
    <id column="store_id" property="store_id" jdbcType="INTEGER"/>
    <result column="store_name" property="store_name" jdbcType="INTEGER"/>
    <result column="description" property="description" jdbcType="VARCHAR"/>
    <result column="logo_img_url" property="logo_img_url" jdbcType="LONGNVARCHAR"/>
    <result column="goods_desc_score" property="goods_desc_score" jdbcType="INTEGER"/>
    <result column="service_attitude_score" property="service_attitude_score" jdbcType="INTEGER"/>
    <result column="logistics_speed_score" property="logistics_speed_score" jdbcType="INTEGER"/>
    <result column="wangwang" property="wangwang" jdbcType="VARCHAR"/>
    <result column="lavel" property="lavel" jdbcType="INTEGER"/>
</resultMap>

<sql id="Goods_Column_list" >
    zkwg.goods.id,zkwg.goods.goods_code,zkwg.goods.img_id,zkwg.goods.name,zkwg.goods.price,zkwg.goods.discount,zkwg.goods.store_id,zkwg.goods.third_level_id,zkwg.goods.slogan,zkwg.goods.description,zkwg.goods.score,zkwg.goods.comment_id,zkwg.goods.storage_num,zkwg.goods.size,zkwg.goods.color
</sql>

<select id="getAllBand" resultMap="bandDto">
    select store_id,logo_img_url from zkwg.store
</select>

<select id="getStoreByName" resultMap="store">
    select * from zkwg.store where store_name = #{storeName}
</select>

<select id="selectGoodsInStoreByKey" resultType="com.qf.pojo.Goods">
    select
        <include refid="Goods_Column_list"/>
    from
        zkwg.goods,zkwg.store
    where
        zkwg.goods.store_id = zkwg.store.store_id
    and
        zkwg.store.store_id = #{store_id}
    and
        zkwg.goods.name like concat('%',#{searchKey},'%')
</select>

</mapper>